<html>
<head>
<title>mars 3.0.23: dynaform(n) -- Dynamic Form Specification, submodule of marsutil(n)</title>
<style type="text/css" media="screen,print">
/* ehtml(5) Standard CSS */

/*---------------------------------------------------------*/
/* General Use                                             */

a {
    /* No underlines */
    text-decoration: none;
}

/* Special formatting for definition lists, to get proper
 * blank lines after descriptions but not after topics. */
dt {
    margin-bottom: 0;
}

dd { 
    margin-bottom: 1em; 
}

dd > p:first-child { 
    margin-top: 0; 
}


/*---------------------------------------------------------*/
/* Specific Macros                                         */

/* bigmark */
div.bigmark {
    display: inline;
    font-family: Verdana;
    font-size: 100%;
    background: black;
    color: white;
    border: 1px solid black;
    border-radius: 5px;
    padding-left: 2px;
    padding-right: 2px;
}

/* def, defitem, defopt */

dt.def {
    font-weight: bold;
}

dt.defitem {
    font-weight: bold;
    font-family: monospace;
}

dt.defopt {
    font-weight: bold;
    font-family: monospace;
}


/* example/ */
pre.example {
    background:     #FFFDD1 ;
    border:         1px solid blue;
    padding-top:    2px;
    padding-bottom: 2px;
    padding-left:   4px;
}


/* hrule */
hr.hrule {
    margin-top: 1em;
    margin-bottom: 1em;
}

/* iref */
a.iref {
    font-family: monospace;
}

/* itemlist */                
ul.itemlist {
    padding-left: 0;
    list-style-type: none;
}

/* listing/ */
pre.listing {
    background:     #FFFDD1 ;
    border:         1px solid blue;
    padding-top:    4px;
    padding-bottom: 4px;
    padding-left:   4px;
}

span.linenum {
    background:     #E3E08F ;
}

/* mark */
div.mark {
    display:       inline;
    font-family:   Verdana;
    font-size:     75%;
    background:    black;
    color:         white;
    border:        1px solid black;
    border-radius: 5px;
    padding-left:  2px;
    padding-right: 2px;
}

/* procedure */

table.procedure {
    border: 1px solid black;
    border-collapse: collapse;
    width: 100%;
}

table.procedure td {
    border: 1px solid black;
}

td.procedure-index {
    padding-right: 5px;
    text-align: right;
    width: 2em;
}


/* topiclist/ */
.topiclist {
    margin-top:    1em;
    margin-bottom: 1em;
}

tr.topic {
    vertical-align: baseline;
}

tr.topicname {
    min-width: 1.5em;
}

/* tt/ */

.tt {
    font-family: monospace;
}



/* olp/ */

ol.olp > li {
    margin-bottom: 1em;
}

/* ulp/ */

ul.ulp > li {
    margin-bottom: 1em;
}

/*---------------------------------------------------------*/
/* table/ plus macros that use it.    Most formatting is
 * depends on the "table" class.                           */

table {
    margin-top:     1em;
    margin-bottom:  1em;
    vertical-align: baseline;
}

th {
    padding-left: 5px;
    text-align:   left;
}

td {
    padding-left:   5px;
    vertical-align: baseline;
}


/* "table" class: standard table formatting. */
.table {
    border:           1px solid black;
    border-spacing:   0;
    color:            black;
    background-color: white;
}

.table tr:first-child {
    font-weight:      bold;
    color:            white;
    background-color: #000099;    
}

.table tr.tr-odd {
    background-color: #EEEEEE;
}

.table tr.tr-even { }

.table-wide {
    width: 100%;
}

        BODY {
            color: black;
            background: white;
            margin-left: 6%;
            margin-right: 6%;
        }

        H1 {
            margin-left: -5%;
        }
        H2 {
            margin-left: -5%;
        }
        HR {
            margin-left: -5%;
        }

        TABLE {
            text-align:    left;
        }
        
        /* mktree styles */
        ul.mktree  li  { list-style: none; }
        ul.mktree, ul.mktree ul, ul.mktree li { 
            margin-left:10px; padding:0px; }
        ul.mktree li .bullet { padding-left: 10px }
        ul.mktree  li.liOpen   .bullet {cursor : pointer; }
        ul.mktree  li.liClosed .bullet {cursor : pointer; }
        ul.mktree  li.liBullet .bullet {cursor : default; }
        ul.mktree  li.liOpen   ul {display: block; }
        ul.mktree  li.liClosed ul {display: none; }
    
</style>



</head>

<body>
<h1 style="background: red;">
&nbsp;mars 3.0.23: Mars Simulation Support Library
</h1>
    

<h2><a name="name">NAME</a></h2>
    

<p><b>dynaform(n)</b> -- Dynamic Form Specification, submodule of <a href="../mann/marsutil.html">marsutil(n)</a>

</p>

<ul>

    <li><a href="#name">NAME</a></li>
    

    <li><a href="#synopsis">SYNOPSIS</a></li>
    

    <li><a href="#description">DESCRIPTION</a></li>
    <ul>

    <li><a href="#form_specification_script">Form Specification Script</a></li>

    <li><a href="#application_resources">Application Resources</a></li>

    <li><a href="#layout_algorithm">Layout Algorithm</a></li>

    <li><a href="#custom_field_types">Custom Field Types</a></li>

</ul>
    

    <li><a href="#commands">COMMANDS</a></li>
    

    <li><a href="#environment">ENVIRONMENT</a></li>
    

    <li><a href="#author">AUTHOR</a></li>
    

    <li><a href="#history">HISTORY</a></li>
    

</ul>
    
    

<h2><a name="synopsis">SYNOPSIS</a></h2>
    

<pre>
package require marsutil 3.0.23
namespace import ::marsutil::*
</pre>

<ul class="itemlist">
<li><a class="iref" href="#field"><i>fieldType field</i> ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#field-context">-context <i>flag</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#field-defvalue">-defvalue <i>value</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#field-invisible">-invisible <i>flag</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#field-loadcmd">-loadcmd <i>command</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#field-tip">-tip <i>text</i></a></li>
<li><a class="iref" href="#br">br</a></li>
<li><a class="iref" href="#c">c ?<i>label</i>? ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#c-for">-for <i>field</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#c-span">-span <i>n</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#c-width">-width <i>width</i></a></li>
<li><a class="iref" href="#case">case <i>case label script</i></a></li>
<li><a class="iref" href="#cc">cc <i>label</i> ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#cc-for">-for <i>field</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#cc-span">-span <i>n</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#cc-width">-width <i>width</i></a></li>
<li><a class="iref" href="#check">check <i>field</i> ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#check-text">-text <i>text</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#check-image">-image <i>image</i></a></li>
<li><a class="iref" href="#color">color <i>field</i> ?<i>options...</i>?</a></li>
<li><a class="iref" href="#dbkey">dbkey <i>field</i> ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#dbkey-table">-table <i>table</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#dbkey-keys">-keys <i>keys</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#dbkey-dispcols">-dispcols <i>names</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#dbkey-widths">-widths <i>widths</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#dbkey-labels">-labels <i>strings</i></a></li>
<li><a class="iref" href="#dbmulti">dbmulti <i>field</i> ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#dbmulti-table">-table <i>table</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#dbmulti-key">-key <i>key</i></a></li>
<li><a class="iref" href="#disp">disp <i>field</i> ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#disp-textcmd">-textcmd <i>cmd</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#disp-width">-width <i>columns</i></a></li>
<li><a class="iref" href="#enum">enum <i>field</i> ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#enum-list">-list <i>values</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#enum-listcmd">-listcmd <i>command</i></a></li>
<li><a class="iref" href="#enumlong">enumlong <i>field</i> ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#enumlong-dict">-dict <i>dict</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#enumlong-dictcmd">-dictcmd <i>command</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#enumlong-showkeys">-showkeys <i>flag</i></a></li>
<li><a class="iref" href="#enumlist">enumlist <i>field</i> ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#enumlist-list">-list <i>values</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#enumlist-listcmd">-listcmd <i>command</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#enumlist-width">-width <i>columns</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#enumlist-height">-height <i>rows</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#enumlist-stripe">-stripe <i>flag</i></a></li>
<li><a class="iref" href="#enumlonglist">enumlonglist <i>field</i> ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#enumlonglist-dict">-dict <i>dict</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#enumlonglist-dictcmd">-dictcmd <i>command</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#enumlonglist-width">-width <i>columns</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#enumlonglist-height">-height <i>rows</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#enumlonglist-stripe">-stripe <i>flag</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#enumlonglist-showkeys">-showkeys <i>flag</i></a></li>
<li><a class="iref" href="#file">file <i>field</i> ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#file-width">-width <i>columns</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#file-title">-title <i>string</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#file-filetypes">-filetypes <i>list</i></a></li>
<li><a class="iref" href="#key">key <i>field</i> ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#key-db">-db <i>db</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#key-table">-table <i>table</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#key-keys">-keys <i>keys</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#key-dispcols">-dispcols <i>names</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#key-widths">-widths <i>widths</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#key-labels">-labels <i>strings</i></a></li>
<li><a class="iref" href="#label">label <i>text</i> ?-for <i>field</i>?</a></li>
<li><a class="iref" href="#layout">layout <i>algorithm</i> ?<i>option value...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#layout-shrink">-shrink <i>flag</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#layout-height">-height <i>height</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#layout-width">-width <i>width</i></a></li>
<li><a class="iref" href="#multi">multi <i>field</i> ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#multi-db">-db <i>db</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#multi-table">-table <i>table</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#multi-key">-key <i>key</i></a></li>
<li><a class="iref" href="#para">para</a></li>
<li><a class="iref" href="#range">range <i>field</i> ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#range-datatype">-datatype <i>object</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#range-changemode">-changemode <i>mode</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#range-min">-min <i>value</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#range-max">-max <i>value</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#range-scalelength">-scalelength <i>pixels</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#range-resetvalue">-resetvalue <i>value</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#range-resolution">-resolution <i>value</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#range-showreset">-showreset <i>flag</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#range-showsymbols">-showsymbols <i>flag</i></a></li>
<li><a class="iref" href="#rc">rc ?<i>label</i>? ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#rc-for">-for <i>field</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#rc-span">-span <i>n</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#rc-width">-width <i>width</i></a></li>
<li><a class="iref" href="#rcc">rcc <i>label</i> ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#rcc-for">-for <i>field</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#rcc-span">-span <i>n</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#rcc-width">-width <i>width</i></a></li>
<li><a class="iref" href="#resources">resources <i>name</i> ?<i>name...</i>?</a></li>
<li><a class="iref" href="#selector">selector <i>field</i> ?<i>options...</i>? <i>selscript</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#selector-listcmd">-listcmd command</a></li>
<li><a class="iref" href="#text">text <i>field</i> ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#text-width">-width <i>columns</i></a></li>
<li><a class="iref" href="#when">when <i>expr tscript</i> ?else <i>fscript</i>?</a></li>
<li><a class="iref" href="#ncolumn">ncolumn</a></li>
<li><a class="iref" href="#2column">2column</a></li>
<li><a class="iref" href="#ribbon">ribbon</a></li>
<li><a class="iref" href="#allitems">dynaform allitems <i>ftype</i></a></li>
<li><a class="iref" href="#cases">dynaform cases <i>ftype field vdict</i></a></li>
<li><a class="iref" href="#context">dynaform context <i>ftype</i></a></li>
<li><a class="iref" href="#define">dynaform define <i>ftype fscript</i></a></li>
<li><a class="iref" href="#dump">dynaform dump <i>ftype</i></a></li>
<li><a class="iref" href="#fields">dynaform fields <i>ftype</i></a></li>
<li><a class="iref" href="#fieldtype_define">dynaform fieldtype define <i>name body</i></a></li>
<li><a class="iref" href="#fieldtype_alias">dynaform fieldtype alias <i>name fieldtype</i> ?<i>options...</i></a></li>
<li><a class="iref" href="#item">dynaform item <i>id</i> ?<i>attr</i>?</a></li>
<li><a class="iref" href="#dynaform_layout">dynaform layout <i>ftype</i></a></li>
<li><a class="iref" href="#dynaform_resources">dynaform resources <i>ftype</i></a></li>
<li><a class="iref" href="#topitems">dynaform topitems <i>ftype</i></a></li>
<li><a class="iref" href="#types">dynaform types</a></li>
</ul>


<h2><a name="description">DESCRIPTION</a></h2>
<p>The dynaform(n) module is used to specify the content and behavior 
of data entry forms with signficant dynamic behavior.  dynaform(n) forms 
are displayed in the GUI using the <a href="../mann/dynaview.html">dynaview(n)</a> widget.  This
man page explains how to define a dynaform(n) form, how to query the 
existing forms, and how to define new field types.

</p>

<h2><a name="form_specification_script">Form Specification Script</a></h2>
<p>A form specification script defines the "items" that make up the
form.  There are three kinds of item: fields, hints, and selectors.
Field items define fields into which the user can enter data, or,
more rarely, data that provides context to the user and the rest of
the form.  Hint items add text and affect how the form appears to the
user, depending on the chosen <a href="#layout_algorithm">Layout Algorithm</a>.  Selector
items determine which items are visible to the user at any given
time.</p>

<p>Consider a plot widget which can plot many different
variables; each variable is subscripted by different indices.  The
user can select the variable using a <a class="iref" href="#selector">selector</a> item, which
will then make the relevant subscript fields visible.</p>

<p><a href="../mann/marsutil.html">marsutil(n)</a> defines a number of standard field types; it
also possible to define <a href="#custom_field_types">Custom Field Types</a>.</p>

<p>The following commands can appear in the specification script:

</p>

<dl>
<dt class="defitem"><a name="field"><i>fieldType field</i> ?<i>options...</i>?</a></dt><dd><p>

Defines a field with name <i>field</i> of type <i>fieldType</i> with
the given <i>options</i>.  Different field types have their own
type-specific options; however, all accept the following options:

</p><dl>
<dt class="defopt"><a name="field-context">-context <i>flag</i></a></dt><dd>

If <i>flag</i> is true, the field will be a read-only context field.
A context field is one that should be set by the application before
the form is displayed; it determines the context for the data being
edited.  Context fields cannot be edited by the user; and in
addition, clearing the form should not clear the context fields.

</dd>
<dt class="defopt"><a name="field-defvalue">-defvalue <i>value</i></a></dt><dd>
Specifies a default value for the field.  When the form is cleared,
this value will be placed in the field.

</dd>
<dt class="defopt"><a name="field-invisible">-invisible <i>flag</i></a></dt><dd>

If <i>flag</i> is true, the field will be invisible, that is, it will
not be displayed to the user.  This is sometimes useful for context
fields, e.g., a field used in an <a class="iref" href="#enum">enum</a> field's
<code>-listcmd</code>.  By default, fields are visible.

</dd>
<dt class="defopt"><a name="field-loadcmd">-loadcmd <i>command</i></a></dt><dd><p>

Specifies a Tcl command that will be called when the field's value
changes.  It will called with two additional arguments: the field's 
item definition dictionary and its current value.  The command should
return a dictionary of field names and values to be loaded into the
form.  For example, a <a class="iref" href="#key">key</a> field might use a <code>-loadcmd</code>
to load a database entity's attributes into the form when the key
changes.</p>

<p>The <i>command</i> may reference upstream field values by name, as well
as the <i>entity_</i> variable (if defined).</p>

<p>Note: It is OK if the returned dictionary contains keys
that don't match any field in the form; they will simply be
ignored.

</p>
</dd>
<dt class="defopt"><a name="field-tip">-tip <i>text</i></a></dt><dd>

Specifies tool-tip text for the field.  How this text is used depends
on the <a class="iref" href="#layout">layout</a> algorithm.

</dd>
</dl>

</dd>
<dt class="defitem"><a name="br">br</a></dt><dd>

For <b>ncolumn</b> layouts, inserts a line break into the form.


</dd>
<dt class="defitem"><a name="c">c ?<i>label</i>? ?<i>options...</i>?</a></dt><dd><p>

For <b>ncolumn</b> layouts, begins a new column.  If <i>label</i> is
given, it will be placed first in the column.  The command takes the
following options:

</p><dl>
<dt class="defopt"><a name="c-for">-for <i>field</i></a></dt><dd>
Associates the <i>label</i> with the named <i>field</i>, just as for 
<a class="iref" href="#label">label</a>.

</dd>
<dt class="defopt"><a name="c-span">-span <i>n</i></a></dt><dd>

This column's content will span <i>n</i> columns in the table
layout.  The default, naturally, is one column.

</dd>
<dt class="defopt"><a name="c-width">-width <i>width</i></a></dt><dd>

This column will be given the specified <i>width</i>, which is
specified in HTML length units, e.g., "<code>3in</code>" or
"<code>100pxi</code>".

</dd>
</dl>

</dd>
<dt class="defitem"><a name="case">case <i>case label script</i></a></dt><dd>

This command is used in <a class="iref" href="#selector">selector</a> scripts to define a
selector case.  The case is called <i>case</i>; the <i>label</i> is a
human-readable string used in the selector pulldown.  The
<i>script</i> is a script of form specification items that will be
visible when this case is selected.  Note that the case is
<b>not</b> a subform with its own layout; when the form is layed out,
all selected items are layed out together.

</dd>
<dt class="defitem"><a name="cc">cc <i>label</i> ?<i>options...</i>?</a></dt><dd><p>

For <b>ncolumn</b> layouts, begins two new columns on the current
row.  The <i>label</i> is placed in the first of the two columns;
subsequent items will appear in the second of the two columns.</p>

<p>The command takes the following options:

</p><dl>
<dt class="defopt"><a name="cc-for">-for <i>field</i></a></dt><dd>
Associates the <i>label</i> with the named <i>field</i>, just as for 
<a class="iref" href="#label">label</a>.

</dd>
<dt class="defopt"><a name="cc-span">-span <i>n</i></a></dt><dd>

The second new column's content will span <i>n</i> columns in the table
layout.  The default, naturally, is one column.

</dd>
<dt class="defopt"><a name="cc-width">-width <i>width</i></a></dt><dd>

The second new column will be given the specified <i>width</i>, which is
specified in HTML length units, e.g., "<code>3in</code>" or
"<code>100px</code>".

</dd>
</dl>

</dd>
<dt class="defitem"><a name="check">check <i>field</i> ?<i>options...</i>?</a></dt><dd><p>

Defines a checkbutton field, i.e., a field for editing boolean flags.
In addition to the standard field options, 
the field type defines the following:

</p><dl>
<dt class="defopt"><a name="check-text">-text <i>text</i></a></dt><dd>
Specifies the text to display as the checkbutton label.

</dd>
<dt class="defopt"><a name="check-image">-image <i>image</i></a></dt><dd>

Specifies the Tk image to display as the checkbutton label.
</dd>
</dl>

</dd>
<dt class="defitem"><a name="color">color <i>field</i> ?<i>options...</i>?</a></dt><dd>

Defines a color field, based on the <a href="../mann/colorfield.html">colorfield(n)</a> widget.
There are no field-type-specific options.

</dd>
<dt class="defitem"><a name="dbkey">dbkey <i>field</i> ?<i>options...</i>?</a></dt><dd><p>

Defines a field for selecting a key value from a database table,
i.e., a <a href="../mann/keyfield.html">keyfield(n)</a> widget.  The field displays a labeled
pulldown for each key column.</p>

<p>This field type depends on an 
<a href="#application_resources">application resource</a> called
"<span class="tt">db_</span>", whose value must be the relevant SQLite3 database handle
(or the equivalent).</p>

<p>In addition to the standard field options, the field type defines 
the following:

</p><dl>
<dt class="defopt"><a name="dbkey-table">-table <i>table</i></a></dt><dd>

Specifies the name of the table or view in the database.

</dd>
<dt class="defopt"><a name="dbkey-keys">-keys <i>keys</i></a></dt><dd>

Specifies a list of the names of the key column or columns in the table.

</dd>
<dt class="defopt"><a name="dbkey-dispcols">-dispcols <i>names</i></a></dt><dd><p>

Specifies the names of columns whose values are to be displayed in
place of the <code>-keys</code> columns in the pulldowns. The values
in the <code>-dispcols</code> columns need to be paired one-to-one
with the matching values in the <code>-keys</code> columns.</p>

<p>This is usually used when the <code>-table</code>'s key is a bare
integer. The <code>-table</code> can be a view that provides a
human-readable version of the key as a parallel column. The GUI then
uses the human-readable text, while the underlying order uses the
integer key.

</p>
</dd>
<dt class="defopt"><a name="dbkey-widths">-widths <i>widths</i></a></dt><dd>

Specifies a list of widths, in characters of the current font, for
each key column.  The widths will determine the approximate width of
each pulldown.

</dd>
<dt class="defopt"><a name="dbkey-labels">-labels <i>strings</i></a></dt><dd>
Specifies a list of label strings, one for each key column.  If a
column's label string is not the empty string, it will appear to the
left of the column's pulldown.
</dd>
</dl>
<p>This design allows each invocation of the dynaform to serve a 
different database.

</p>

</dd>
<dt class="defitem"><a name="dbmulti">dbmulti <i>field</i> ?<i>options...</i>?</a></dt><dd><p>

Defines a context field containing multiple table keys for a given
database and table.  The field (a <a href="../mann/multifield.html">multifield(n)</a> widget) displays
the number of selected items.  The field type defines the following
additional options:

</p><dl>
<dt class="defopt"><a name="dbmulti-table">-table <i>table</i></a></dt><dd>

Specifies the name of the table or view in the database.

</dd>
<dt class="defopt"><a name="dbmulti-key">-key <i>key</i></a></dt><dd>

Specifies a list of the name of the key column.  It is assumed that
the table has a single key column; however, this can be simulated using
a view that concatenates the values of the key columns in some
way.
</dd>
</dl>
<p>The field itself makes no use of these options; they are provided for
use by the field's <span class="tt">-loadcmd</span>.

</p>

</dd>
<dt class="defitem"><a name="disp">disp <i>field</i> ?<i>options...</i>?</a></dt><dd><p>

Defines a field for displaying an arbitrary, read-only text string.
(i.e., a <a href="../mann/dispfield.html">dispfield(n)</a> widget).  This is useful for
displaying ancillary data to the user that the user is not allowed to
edit.  The field type defines the following additional options:

</p><dl>
<dt class="defopt"><a name="disp-textcmd">-textcmd <i>cmd</i></a></dt><dd><p>
Specifies a command to be called to retrieve the field's value
for display.  The command may contain references to the values of
any upstream fields.  The return value is placed in the field.</p>

<p>This option is useful for translating numeric object IDs and other
opaque references into human-readable values.  The true ID goes in
an upstream field (and is quite possibly invisible); this one takes
the true ID and produces the value for display.

</p>
</dd>
<dt class="defopt"><a name="disp-width">-width <i>columns</i></a></dt><dd>
Specifies the width of the field in characters of the current
font.

</dd>
</dl>

</dd>
<dt class="defitem"><a name="enum">enum <i>field</i> ?<i>options...</i>?</a></dt><dd><p>

Defines an enumeration field, i.e., a pull-down menu for a specific
set of values.  In addition to the standard field options, 
the field type defines the following:

</p><dl>
<dt class="defopt"><a name="enum-list">-list <i>values</i></a></dt><dd>
Specifies the list of values to display in the pull-down.

</dd>
<dt class="defopt"><a name="enum-listcmd">-listcmd <i>command</i></a></dt><dd><p>

Specifies a command to call to retrieve the list of values.  This
option overrides <code>-list</code>.  The command may contain
references to the values of upstream fields.  For example:

</p><pre>
    enum a -listcmd {::actor names}
    enum g -listcmd {::ownedgroups $a}
</pre>
<p>The first field allows the user to select the name of an actor; the
second allows the user to select the name of a group owned by the
selected actor.
</p>

</dd>
</dl>

</dd>
<dt class="defitem"><a name="enumlong">enumlong <i>field</i> ?<i>options...</i>?</a></dt><dd><p>

Defines an enumeration field, i.e., a pull-down menu for a specific
set of values.  An <a class="iref" href="#enumlong">enumlong</a> is like an <a class="iref" href="#enum">enum</a>, but it
is configured with a dictionary of short name/long name pairs instead
of a simple list.  It displays the long names in the pull-down, but
returns a short name as its value.  In addition to the standard field 
options, the field type defines the following:

</p><dl>
<dt class="defopt"><a name="enumlong-dict">-dict <i>dict</i></a></dt><dd>
Specifies the dictionary of short names and long names.

</dd>
<dt class="defopt"><a name="enumlong-dictcmd">-dictcmd <i>command</i></a></dt><dd>

Specifies a command to call to retrieve the short name/long name
dictionary.  This option overrides <code>-dict</code>.  The command may contain
references to the values of upstream fields; see <a class="iref" href="#enum">enum</a> for an
example of the syntax.

</dd>
<dt class="defopt"><a name="enumlong-showkeys">-showkeys <i>flag</i></a></dt><dd>

If true, the widget will display both short names and long names,
e.g., "short: long".  If false (the default) it will display only the
long names.
</dd>
</dl>

</dd>
<dt class="defitem"><a name="enumlist">enumlist <i>field</i> ?<i>options...</i>?</a></dt><dd><p>

Defines a field for selecting multiple items from an enumerated list
(i.e., a <a href="../mann/listfield.html">listfield(n)</a> widget). In addition to the standard 
field options, the field type defines the following:

</p><dl>
<dt class="defopt"><a name="enumlist-list">-list <i>values</i></a></dt><dd>
Specifies the list of values from which the user can choose.

</dd>
<dt class="defopt"><a name="enumlist-listcmd">-listcmd <i>command</i></a></dt><dd><p>

Specifies a command to call to retrieve the list of values from 
which the user can choose.  This
option overrides <code>-list</code>.  The command may contain
references to the values of upstream fields.  For example:

</p><pre>
    enum     a     -listcmd {::actor names}
    enumlist glist -listcmd {::ownedgroups $a}
</pre>
<p>The first field allows the user to select the name of an actor; the
second allows the user to select the names of one or more groups owned 
by the selected actor.

</p>

</dd>
<dt class="defopt"><a name="enumlist-width">-width <i>columns</i></a></dt><dd>

This field displays two side-by-side list boxes, with buttons in between.
Both list boxes will have this width in terms of the average-sized
character of the current font.  Long items will wrap.

</dd>
<dt class="defopt"><a name="enumlist-height">-height <i>rows</i></a></dt><dd>

Specifies the number of visible items in the selection lists.
Defaults to 5.

</dd>
<dt class="defopt"><a name="enumlist-stripe">-stripe <i>flag</i></a></dt><dd>

If true (the default), then even-numbered items in the
selection lists are displayed with a light green stripe.   If long
items wrap, this makes it easier to distinguish the items.

</dd>
</dl>

</dd>
<dt class="defitem"><a name="enumlonglist">enumlonglist <i>field</i> ?<i>options...</i>?</a></dt><dd><p>

Defines a field for selecting multiple items from an enumerated list
(i.e., a <a href="../mann/listfield.html">listfield(n)</a> widget), where the valid choices are
specified as a short name/long name dictionary.  The user selects
from the long names, and the field's value is a list of the matching
short names.</p>

<p>In addition to the standard field options, the field type defines 
the following:

</p><dl>
<dt class="defopt"><a name="enumlonglist-dict">-dict <i>dict</i></a></dt><dd>
Specifies the dictionary of short name/long name values from which the user 
can choose.

</dd>
<dt class="defopt"><a name="enumlonglist-dictcmd">-dictcmd <i>command</i></a></dt><dd>

Specifies a command to call to retrieve the dictionary of 
short name/long name values from which the user can choose.  This
option overrides <code>-dict</code>.  The command may contain
references to the values of upstream fields; see 
<a class="iref" href="#enumlist">enumlist</a> for an example of the syntax.

</dd>
<dt class="defopt"><a name="enumlonglist-width">-width <i>columns</i></a></dt><dd>

This field displays two side-by-side list boxes, with buttons in between.
Both list boxes will have this width in terms of the average-sized
character of the current font.  Long items will wrap.

</dd>
<dt class="defopt"><a name="enumlonglist-height">-height <i>rows</i></a></dt><dd>

Specifies the number of visible items in the selection lists.
Defaults to 5.

</dd>
<dt class="defopt"><a name="enumlonglist-stripe">-stripe <i>flag</i></a></dt><dd>

If true (the default), then even-numbered items in the
selection lists are displayed with a light green stripe.   If long
items wrap, this makes it easier to distinguish the items.

</dd>
<dt class="defopt"><a name="enumlonglist-showkeys">-showkeys <i>flag</i></a></dt><dd>

If true, the widget will display both short names and long names,
e.g., "short: long".  If false (the default) it will display only the
long names.
</dd>
</dl>

</dd>
<dt class="defitem"><a name="file">file <i>field</i> ?<i>options...</i>?</a></dt><dd><p>

Defines a field for selecting a file from the disk
(i.e., a <a href="../mann/filefield.html">filefield(n)</a> widget).  The field displays the selected
file name as a read-only string, and includes a "Browse" button for 
selecting a different file.  The field type defines the following 
additional options:

</p><dl>
<dt class="defopt"><a name="file-width">-width <i>columns</i></a></dt><dd>
Specifies the width of the field in characters of the current
font.

</dd>
<dt class="defopt"><a name="file-title">-title <i>string</i></a></dt><dd>
Specifies the title string for the file selection dialog.  Defaults
to "Select File".

</dd>
<dt class="defopt"><a name="file-filetypes">-filetypes <i>list</i></a></dt><dd>
Specifies the acceptable file type or types, in the same form as
for <span class="tt">tk_getOpenFile</span>.  Defaults to any kind of file.

</dd>
</dl>

</dd>
<dt class="defitem"><a name="key">key <i>field</i> ?<i>options...</i>?</a></dt><dd><p>

Defines a field for selecting a key value from a database table,
i.e., a <a href="../mann/keyfield.html">keyfield(n)</a> widget.  The field displays a labeled
pulldown for each key column.  In addition to the standard
field options, the field type defines the following:

</p><dl>
<dt class="defopt"><a name="key-db">-db <i>db</i></a></dt><dd>
Specifies the name of an <a href="../mann/sqldocument.html">sqldocument(n)</a> or the equivalent
containing the relevant table.

</dd>
<dt class="defopt"><a name="key-table">-table <i>table</i></a></dt><dd>

Specifies the name of the table or view in the database.

</dd>
<dt class="defopt"><a name="key-keys">-keys <i>keys</i></a></dt><dd>

Specifies a list of the names of the key column or columns in the table.

</dd>
<dt class="defopt"><a name="key-dispcols">-dispcols <i>names</i></a></dt><dd><p>

Specifies the names of columns whose values are to be displayed in
place of the <code>-keys</code> columns in the pulldowns. The values
in the <code>-dispcols</code> columns need to be paired one-to-one
with the matching values in the <code>-keys</code> columns.</p>

<p>This is usually used when the <code>-table</code>'s key is a bare
integer. The <code>-table</code> can be a view that provides a
human-readable version of the key as a parallel column. The GUI then
uses the human-readable text, while the underlying order uses the
integer key.

</p>
</dd>
<dt class="defopt"><a name="key-widths">-widths <i>widths</i></a></dt><dd>

Specifies a list of widths, in characters of the current font, for
each key column.  The widths will determine the approximate width of
each pulldown.

</dd>
<dt class="defopt"><a name="key-labels">-labels <i>strings</i></a></dt><dd>
Specifies a list of label strings, one for each key column.  If a
column's label string is not the empty string, it will appear to the
left of the column's pulldown.

</dd>
</dl>
<p>This design allows different dynaforms to access databases via
different handles.  If it is certain that the application will only 
use one database handle, the application can define an alias like
this:

</p>

<pre>
    dynaform fieldtype alias key key -db ::rdb
</pre>
<p>All key fields will then use the same database handle.

</p>

</dd>
<dt class="defitem"><a name="label">label <i>text</i> ?-for <i>field</i>?</a></dt><dd><p>

For those layout algorithms that use labels (<b>ncolumn</b> and
<b>ribbon</b>), specifies some <i>text</i> to display to the user.
If a <i>field</i> name is given, the label will be associated with
that field; if the application marks the field's value invalid, the
label will be displayed in a way that reflects this.</p>

<p>When the <b>-for</b> option is used (either here or in the 
commands that define labels) for the <b>2column</b> and <b>ncolumn</b>
layout algorithms, the label text is escaped with 
<code>&amp;nbsp;</code> so that the text is rendered all on one line.

</p>
</dd>
<dt class="defitem"><a name="layout">layout <i>algorithm</i> ?<i>option value...</i>?</a></dt><dd><p>

Names the <a href="#layout_algorithm">Layout Algorithm</a> for this form type.  Defaults
to <b>ncolumn</b>.</p>

<p>This command can appear anywhere in the form; conventionally, if it
appears it is the first command in the specification script.</p>

<p>The command can also set the following options affecting the layout
and size of the form:

</p><dl>

<dt class="defopt"><a name="layout-shrink">-shrink <i>flag</i></a></dt><dd>
Defaults to <b>true</b>.  By default, then, the form will have the smallest
size that will contain the currently displayed content.  This is a problem
for particularly dynamic forms; thus, the form can choose to set <i>flag</i>
to <b>false</b>, and set the default width and height explicitly.

</dd>
<dt class="defopt"><a name="layout-height">-height <i>height</i></a></dt>
<dt class="defopt"><a name="layout-width">-width <i>width</i></a></dt><dd>
Sets the default width and height of the form in pixels.  The form will be
this size unless the content is larger, in which case it will expand to fit
(at the cost of a visible jump).  These options are ignored if 
<b>-shrink</b> is <b>true</b>.

</dd>
</dl>

</dd>
<dt class="defitem"><a name="multi">multi <i>field</i> ?<i>options...</i>?</a></dt><dd><p>

Defines a context field containing multiple table keys for a given
database and table.  The field (a <a href="../mann/multifield.html">multifield(n)</a> widget) displays
the number of selected items.  The field type defines the following
additional options:

</p><dl>
<dt class="defopt"><a name="multi-db">-db <i>db</i></a></dt><dd>
Specifies the name of an <a href="../mann/sqldocument.html">sqldocument(n)</a> or the equivalent
containing the relevant table.

</dd>
<dt class="defopt"><a name="multi-table">-table <i>table</i></a></dt><dd>

Specifies the name of the table or view in the database.

</dd>
<dt class="defopt"><a name="multi-key">-key <i>key</i></a></dt><dd>

Specifies a list of the name of the key column.  It is assumed that
the table has a single key column; however, this can simulated using
a view that concatenates the values of the key columns in some
way.
</dd>
</dl>

</dd>
<dt class="defitem"><a name="para">para</a></dt><dd>

For <b>ncolumn</b> layouts, inserts a paragraph break into the form.

</dd>
<dt class="defitem"><a name="range">range <i>field</i> ?<i>options...</i>?</a></dt><dd><p>

Defines a field for selecting a number from a range using a slider
(i.e., a <a href="../mann/rangefield.html">rangefield(n)</a> widget).  The field type defines the 
following additional options, all of which are defined in the
<a href="../mann/rangefield.html">rangefield(n)</a> man page:

</p><dl>
<dt class="defopt"><a name="range-datatype">-datatype <i>object</i></a></dt><dd>
This option is equivalent to the <a href="../mann/rangefield.html">rangefield(n)</a>
<code>-type</code> option.

</dd>
<dt class="defopt"><a name="range-changemode">-changemode <i>mode</i></a></dt>
<dt class="defopt"><a name="range-min">-min <i>value</i></a></dt>
<dt class="defopt"><a name="range-max">-max <i>value</i></a></dt>
<dt class="defopt"><a name="range-scalelength">-scalelength <i>pixels</i></a></dt>
<dt class="defopt"><a name="range-resetvalue">-resetvalue <i>value</i></a></dt>
<dt class="defopt"><a name="range-resolution">-resolution <i>value</i></a></dt>
<dt class="defopt"><a name="range-showreset">-showreset <i>flag</i></a></dt>
<dt class="defopt"><a name="range-showsymbols">-showsymbols <i>flag</i></a></dt><dd>
These options are defined just as for <a href="../mann/rangefield.html">rangefield(n)</a>.

</dd>
</dl>

</dd>
<dt class="defitem"><a name="rc">rc ?<i>label</i>? ?<i>options...</i>?</a></dt><dd><p>

For <b>ncolumn</b> layouts, begins a new row and column.  If <i>label</i> is
given, it will be placed first in the column.  The command takes the
following options:

</p><dl>
<dt class="defopt"><a name="rc-for">-for <i>field</i></a></dt><dd>
Associates the <i>label</i> with the named <i>field</i>, just as for 
<a class="iref" href="#label">label</a>.

</dd>
<dt class="defopt"><a name="rc-span">-span <i>n</i></a></dt><dd>

This column's content will span <i>n</i> columns in the table
layout.  The default, naturally, is one column.

</dd>
<dt class="defopt"><a name="rc-width">-width <i>width</i></a></dt><dd>

The column will be given the specified <i>width</i>, which is
specified in HTML length units, e.g., "<code>3in</code>" or
"<code>100px</code>".

</dd>
</dl>

</dd>
<dt class="defitem"><a name="rcc">rcc <i>label</i> ?<i>options...</i>?</a></dt><dd><p>

For <b>ncolumn</b> layouts, begins a new row with two new columns.
The <i>label</i> is placed in the first of the two columns;
subsequent items will appear in the second of the two columns.</p>

<p>The command takes the following options:

</p><dl>
<dt class="defopt"><a name="rcc-for">-for <i>field</i></a></dt><dd>
Associates the <i>label</i> with the named <i>field</i>, just as for 
<a class="iref" href="#label">label</a>.

</dd>
<dt class="defopt"><a name="rcc-span">-span <i>n</i></a></dt><dd>

The second new column's content will span <i>n</i> columns in the table
layout.  The default, naturally, is one column.

</dd>
<dt class="defopt"><a name="rcc-width">-width <i>width</i></a></dt><dd>

The second new column will be given the specified <i>width</i>, which is
specified in HTML length units, e.g., "<code>3in</code>" or
"<code>100px</code>".

</dd>
</dl>

</dd>
<dt class="defitem"><a name="resources">resources <i>name</i> ?<i>name...</i>?</a></dt><dd><p>

Specifies the name(s) of <a href="#application_resources">Application Resources</a> required by a
specific instance of the form at run time.  Resource values are provided 
to the <a href="../mann/dynaview.html">dynaview(n)</a> widget when it is created, and it in turn makes
them available to the form's callback commands.  In particular,  
field callback commands may refer to resource values by name, just
as they may refer to upstream fields by name.  For example, a 
<span class="tt">-loadcmd</span> might refer to the relevant order object as "<span class="tt">$order_</span>".</p>

<p>Resource names conventionally have a trailing underscore so that
they won't collide with parameter names, e.g., "<span class="tt">db_</span>", 
"<span class="tt">order_</span>".

</p>
</dd>
<dt class="defitem"><a name="selector">selector <i>field</i> ?<i>options...</i>? <i>selscript</i></a></dt><dd><p>

Defines a selector.  A selector is a field-like item that controls
the items displayed in the form.  The selector script,
<i>selscript</i>, defines a number of <a class="iref" href="#case">case</a>s; each case can contain
zero or more items.  The selector displays a pulldown with a list of
the cases; when the user selects a case, the relevant items are
displayed.  As a field, the selector item's value is the selected
case.</p>

<p>The selector command takes all of the standard field
options, and also the following:

</p><dl>
<dt class="defopt"><a name="selector-listcmd">-listcmd command</a></dt><dd><p>
The <i>selscript</i> defines all of the theoretically possible cases;
however, which cases can actually be selected might depend on
context, e.g., different activities might be assignable to different
groups.  The dynaform can be written for all group types, and the
list of cases to display can be determined by this command.</p>

<p>As with the <a class="iref" href="#enum">enum</a> item's <code>-listcmd</code>, the
<i>command</i> may reference upstream fields, thus providing the
necessary context.

</p>
</dd>
</dl>

</dd>
<dt class="defitem"><a name="text">text <i>field</i> ?<i>options...</i>?</a></dt><dd><p>

Defines a field for entering an arbitrary text string.
(i.e., a <a href="../mann/textfield.html">textfield(n)</a> widget).  The field type defines the 
following additional option:

</p><dl>
<dt class="defopt"><a name="text-width">-width <i>columns</i></a></dt><dd>
Specifies the width of the field in characters of the current
font.

</dd>
</dl>

</dd>
<dt class="defitem"><a name="when">when <i>expr tscript</i> ?else <i>fscript</i>?</a></dt><dd><p>

This command is like a <a class="iref" href="#selector">selector</a> in that it controls the
items that will be displayed; however, it is not a field.  Instead,
<i>expr</i> is a boolean expression which can reference upstream
fields by name.  If the expression is true, the items defined by 
<i>tscript</i> will be visible; if not, the items defined by
<i>fscript</i> (if any) will be visible.</p>

<p>For example, suppose field <code>b</code> should be visible only if
field <code>a</code> has a non-empty value:

</p><pre>
    text a
    when {$a ne ""} {
        text b
    }
</pre>

</dd>
</dl>

<h2><a name="application_resources">Application Resources</a></h2>
<p>As noted above, the various field callback commands (e.g., <span class="tt">-loadcmd</span>, 
<span class="tt">-listcmd</span>, and so forth) can refer to "upstream" field values. In 
addition, they can also refer to "application resources": named values
provided by the application when the form is invoked.  Certain field 
types, notably <a class="iref" href="#dbkey">dbkey</a>, also require application resources.</p>

<p>For example, a particular field's <span class="tt">-loadcmd</span> might need to access 
a database.  We can't hardcode the database handle into the <span class="tt">-loadcmd</span>
without limiting the form to being used with only that one database.
Instead, we define an application resource, "<b><span class="tt">db_</span></b>", whose
value must be set to the required database handle.  The form's field 
callbacks can than refer freely to "<b><span class="tt">$db_</span></b>".</p>

<p>A dynaform(n) is displayed in a <a href="../mann/dynaview.html">dynaview(n)</a> widget; and the 
application must provide the form's resource values to the 
<a href="../mann/dynaview.html">dynaview(n)</a> widget via its <span class="tt">-resources</span> option.  If there's
a mismatch between the given and required resources, the widget will
throw an error.

</p>

<h2><a name="layout_algorithm">Layout Algorithm</a></h2>
<p>Each dynaform is associated with a specific layout algorithm; this
algorithm, specified using the <a class="iref" href="#layout">layout</a> command, determines how 
the form's items are displayed to the user.  At present, there are 
three supported algorithms:

</p>

<dl>
<dt class="defitem"><a name="ncolumn">ncolumn</a></dt><dd>

<b>Default Layout</b>: This layout is intended to emulate the classic
<a href="../mann/form.html">form(n)</a> two-column layout, with extensions to allow more
complex table-based forms.  Use the <a class="iref" href="#label">label</a> item to label
fields, and the <a class="iref" href="#c">c</a>, <a class="iref" href="#cc">cc</a>, <a class="iref" href="#rc">rc</a>, and 
<a class="iref" href="#rcc">rcc</a> items to control the layout.  Fields can define tool
tips using the <code>-tip</code> option.

</dd>
<dt class="defitem"><a name="2column">2column</a></dt><dd>

This layout is intended to emulate the classic <a href="../mann/form.html">form(n)</a> 
two-column layout with minimal changes.  Each field widget appears on
its own row, labeled by its <code>-tip</code> text.  "Hint" items
(e.g., <a class="iref" href="#label">label</a>) are ignored.

</dd>
<dt class="defitem"><a name="ribbon">ribbon</a></dt><dd>

This layout puts all fields and labels on one line, which can wrap to
subsequent lines if necessary.  Of the "Hint" items, only 
<a class="iref" href="#label">label</a> is used.  Fields can define tool tips using the
<code>-tip</code> option.

</dd>
</dl>

<h2><a name="custom_field_types">Custom Field Types</a></h2>
<p>There are two ways to define new field types for use with dynaform(n)
and <a href="../mann/dynaview.html">dynaview(n)</a>.  The simpler of the two is define a
<a class="iref" href="#fieldtype_alias">fieldtype alias</a>; this is useful when you find that you are using
the same field type with the same options over and over again.</p>

<p>To create a new field type based on a new <a href="../mani/field.html">field(i)</a> widget,
use <a class="iref" href="#fieldtype_define">fieldtype define</a>.  See <a href="../mani/dynaform_field.html">dynaform_field(i)</a> for
details.

</p>

<h2><a name="commands">COMMANDS</a></h2>
<p>This module defines the following commands.  The <a class="iref" href="#define">define</a> and
<a class="iref" href="#fieldtype_define">fieldtype define</a> commands are for use by the application;
the remainder are primarily for use by <a href="../mann/dynaview.html">dynaview(n)</a>.

</p>

<dl>

<dt class="defitem"><a name="allitems">dynaform allitems <i>ftype</i></a></dt><dd>

Returns a list of the IDs of all items defined by the named form
type, in order of definition.

</dd>
<dt class="defitem"><a name="cases">dynaform cases <i>ftype field vdict</i></a></dt><dd>

Returns the symbolic names of the cases associated with form
<i>ftype</i>'s <a class="iref" href="#selector">selector</a> field <i>field</i> given the context
provided by the value dictionary <i>vdict</i>.  This command is 
provided to make it easy for clients (e.g., orders) to validate the 
value of selector fields.

</dd>
<dt class="defitem"><a name="context">dynaform context <i>ftype</i></a></dt><dd>

Returns a list of the names of any context fields for the named
form type.

</dd>
<dt class="defitem"><a name="define">dynaform define <i>ftype fscript</i></a></dt><dd>

Defines a new form type called <i>ftype</i> (or redefines an existing
one).  The form type is defined by a 
<a href="#form_specification_script">Form Specification Script</a>.

</dd>
<dt class="defitem"><a name="dump">dynaform dump <i>ftype</i></a></dt><dd>

Dumps a pretty-printed item tree, in outline form, for the named 
form type.  This command is primarily useful for debugging
dynaform(n) itself.

</dd>
<dt class="defitem"><a name="fields">dynaform fields <i>ftype</i></a></dt><dd>

Returns a list of the names of the fields contained in the named form
type.  Note that field items on different branches of the tree can
have the same name; however, the name will only appear once in the
output.

</dd>
<dt class="defitem"><a name="fieldtype_define">dynaform fieldtype define <i>name body</i></a></dt><dd> 

Defines a new field type called <i>name</i> for use in form
specification scripts.  The <i>name</i> will become a command in the
form specification language, parallel to the existing field commands.
The <i>body</i> is a snit::type definition body matching the 
<a href="../mani/dynaform_fieldtype.html">dynaform_fieldtype(i)</a> interface.

</dd>
<dt class="defitem"><a name="fieldtype_alias">dynaform fieldtype alias <i>name fieldtype</i> ?<i>options...</i></a></dt><dd><p>

Defines a new field type command, <i>name</i>, as an alias to an
existing <i>fieldtype</i>.  The <i>options</i> can include any of the
options provided by the <i>fieldtype</i>.  Once aliased, the
<i>name</i> can be used a field command in form specification
scripts.  For example, the following defines a new enumeration
type called "character":

</p><pre>
    dynaform fieldtype alias character enumlong -dict {
        good "The Good"
        bad  "The Bad"
        ugly "The Ugly"
    }
</pre>
<p>You may not create an alias to an alias.

</p>

</dd>
<dt class="defitem"><a name="item">dynaform item <i>id</i> ?<i>attr</i>?</a></dt><dd>

Given a dynaform item ID and an item attribute name, returns the
value of the attribute.  If the attribute name is omitted, returns
the entire item definition dictionary.

</dd>
<dt class="defitem"><a name="dynaform_layout">dynaform layout <i>ftype</i></a></dt><dd>

Returns the name of the <a class="iref" href="#layout">layout</a> algorithm for the named form
type.

</dd>
<dt class="defitem"><a name="dynaform_resources">dynaform resources <i>ftype</i></a></dt><dd>
Returns the names of the <a href="#application_resources">Application Resources</a> required by
this form.  The returned list will include all resources 
explicitly declared in the form specification using the 
<a class="iref" href="#resources">resources</a> command along with all resources implicitly 
required by the field types used in the specification.

</dd>
<dt class="defitem"><a name="topitems">dynaform topitems <i>ftype</i></a></dt><dd>

Because of <a class="iref" href="#selector">selector</a>s, the items in a form are arranged in a
tree.  This command returns a list of the IDs of all items defined at
the toplevel of the form's tree, in order of definition.

</dd>
<dt class="defitem"><a name="types">dynaform types</a></dt><dd>

Returns a list of names of the defined form types.


</dd>
</dl>


<h2><a name="environment">ENVIRONMENT</a></h2>
<p>marsutil(n) requires Tcl 8.5 or later.</p>

<p>To use marsutil(n) in a Tcl script, the environment variable
<code>TCLLIBPATH</code> must include the parent of the package
directory.

</p>

<h2><a name="author">AUTHOR</a></h2>
<p>Will Duquette

</p>

<h2><a name="history">HISTORY</a></h2>
<p>Original package.

</p>

<hr>
<p><i>mars 3.0.23 Man page generated by manpage(n) on 
Fri Nov 20 09:53:50 PST 2015</i>
</p>

</body>
</html>
    











