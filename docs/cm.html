<html><head>
<title>mars 3.0.23: Configuration Management Plan</title>
<style>
/* ehtml(5) Standard CSS */

/*---------------------------------------------------------*/
/* General Use                                             */

a {
    /* No underlines */
    text-decoration: none;
}

/* Special formatting for definition lists, to get proper
 * blank lines after descriptions but not after topics. */
dt {
    margin-bottom: 0;
}

dd { 
    margin-bottom: 1em; 
}

dd > p:first-child { 
    margin-top: 0; 
}


/*---------------------------------------------------------*/
/* Specific Macros                                         */

/* bigmark */
div.bigmark {
    display: inline;
    font-family: Verdana;
    font-size: 100%;
    background: black;
    color: white;
    border: 1px solid black;
    border-radius: 5px;
    padding-left: 2px;
    padding-right: 2px;
}

/* def, defitem, defopt */

dt.def {
    font-weight: bold;
}

dt.defitem {
    font-weight: bold;
    font-family: monospace;
}

dt.defopt {
    font-weight: bold;
    font-family: monospace;
}


/* example/ */
pre.example {
    background:     #FFFDD1 ;
    border:         1px solid blue;
    padding-top:    2px;
    padding-bottom: 2px;
    padding-left:   4px;
}


/* hrule */
hr.hrule {
    margin-top: 1em;
    margin-bottom: 1em;
}

/* iref */
a.iref {
    font-family: monospace;
}

/* itemlist */                
ul.itemlist {
    padding-left: 0;
    list-style-type: none;
}

/* listing/ */
pre.listing {
    background:     #FFFDD1 ;
    border:         1px solid blue;
    padding-top:    4px;
    padding-bottom: 4px;
    padding-left:   4px;
}

span.linenum {
    background:     #E3E08F ;
}

/* mark */
div.mark {
    display:       inline;
    font-family:   Verdana;
    font-size:     75%;
    background:    black;
    color:         white;
    border:        1px solid black;
    border-radius: 5px;
    padding-left:  2px;
    padding-right: 2px;
}

/* procedure */

table.procedure {
    border: 1px solid black;
    border-collapse: collapse;
    width: 100%;
}

table.procedure td {
    border: 1px solid black;
}

td.procedure-index {
    padding-right: 5px;
    text-align: right;
    width: 2em;
}


/* topiclist/ */
.topiclist {
    margin-top:    1em;
    margin-bottom: 1em;
}

tr.topic {
    vertical-align: baseline;
}

tr.topicname {
    min-width: 1.5em;
}

/* tt/ */

.tt {
    font-family: monospace;
}



/* olp/ */

ol.olp > li {
    margin-bottom: 1em;
}

/* ulp/ */

ul.ulp > li {
    margin-bottom: 1em;
}

/*---------------------------------------------------------*/
/* table/ plus macros that use it.    Most formatting is
 * depends on the "table" class.                           */

table {
    margin-top:     1em;
    margin-bottom:  1em;
    vertical-align: baseline;
}

th {
    padding-left: 5px;
    text-align:   left;
}

td {
    padding-left:   5px;
    vertical-align: baseline;
}


/* "table" class: standard table formatting. */
.table {
    border:           1px solid black;
    border-spacing:   0;
    color:            black;
    background-color: white;
}

.table tr:first-child {
    font-weight:      bold;
    color:            white;
    background-color: #000099;    
}

.table tr.tr-odd {
    background-color: #EEEEEE;
}

.table tr.tr-even { }

.table-wide {
    width: 100%;
}

        BODY {
            color: black;
            background: white;
            margin-left: 1%;
            margin-right: 1%;
        }
    
</style>
</head>

<body>
<h1 style="background: red;">
&nbsp;mars 3.0.23: Mars Simulation Support Library
</h1>
    
<h1>Configuration Management Plan</h1>
    



<hr class="hrule">

<h2>Table of Contents</h2>

<p><b><a href="#changelog" name="toc.changelog">Change Log</a></b></p>


<p><b><a href="#overview" name="toc.overview">1. Overview</a></b></p>

<ul>

    <li><a href="#overview.numbering" name="toc.overview.numbering">1.1 Mars Version Numbering</a></li>

    

    <li><a href="#overview.tagged_releases" name="toc.overview.tagged_releases">1.2 Tagged Releases</a></li>

    

    <li><a href="#overview.tree" name="toc.overview.tree">1.3 Project Tree</a></li>

    

    <li><a href="#overview.docs" name="toc.overview.docs">1.4 Development Documentation</a></li>

    

    <li><a href="#overview.references" name="toc.overview.references">1.5 References</a></li>

    

</ul>
    
<p><b><a href="#platform" name="toc.platform">2. Target Platforms</a></b></p>


<p><b><a href="#vc" name="toc.vc">3. Version Control</a></b></p>

<ul>

    <li><a href="#vc.repository" name="toc.vc.repository">3.1 The Git Repository</a></li>

    

    <li><a href="#vc.branches" name="toc.vc.branches">3.2 Git Branches and Tags</a></li>

    <ul>

    <li><a href="#vc.branches.master" name="toc.vc.branches.master">3.2.1 Main-Line Development</a></li>

    

    <li><a href="#vc.branches.builds" name="toc.vc.branches.builds">3.2.2 Build Tags</a></li>

    

    <li><a href="#vc.branches.exper" name="toc.vc.branches.exper">3.2.3 Experimental Branches</a></li>

    

    <li><a href="#vc.branches.bugfix" name="toc.vc.branches.bugfix">3.2.4 Bug-fix Branches</a></li>

    

    <li><a href="#vc.branches.release" name="toc.vc.branches.release">3.2.5 Release Branches</a></li>

    

</ul>
    

    <li><a href="#vc.commits" name="toc.vc.commits">3.3 Committing Changes</a></li>

    <ul>

    <li><a href="#vc.commits.issues" name="toc.vc.commits.issues">3.3.1 Committing Changes for an Issue</a></li>

    

</ul>
    

</ul>
    
<p><b><a href="#issue" name="toc.issue">4. Issue Tracking</a></b></p>

<ul>

    <li><a href="#issue.milestones" name="toc.issue.milestones">4.1 Versions and Milestones</a></li>

    

    <li><a href="#issue.reporting" name="toc.issue.reporting">4.2 Issue Contents</a></li>

    

    <li><a href="#issue.lifecycle" name="toc.issue.lifecycle">4.3 Life Cycle</a></li>

    

</ul>
    
<p><b><a href="#clients" name="toc.clients">5. Client Projects</a></b></p>

<ul>

    <li><a href="#clients.issues" name="toc.clients.issues">5.1 Bug Reporting</a></li>

    

    <li><a href="#clients.cmbuilds" name="toc.clients.cmbuilds">5.2 Client Official Builds</a></li>

    

</ul>
    
<p><b><a href="#proc" name="toc.proc">6. Procedures</a></b></p>

<ul>

    <li><a href="#proc.clone" name="toc.proc.clone">6.1 Cloning the Repository</a></li>

    

    <li><a href="#proc.devbuild" name="toc.proc.devbuild">6.2 Performing a Development Build</a></li>

    

    <li><a href="#proc.cmbuild" name="toc.proc.cmbuild">6.3 Performing Official Builds</a></li>

    

    <li><a href="#proc.commit" name="toc.proc.commit">6.4 Committing Bug Fixes</a></li>

    

</ul>
    


<h2>List of Tables</h2>
<ul>

    <li><a href="#tab.tree" name="toc.tab.tree">Table 1-1: Project Directory Tree</a></li>

</ul>
    

    

<hr class="hrule">


<h2><a name="changelog" href="#toc.changelog">Change Log</a></h2>
    

<table class="table table-wide">
<tr>
<th>Status</th>
<th>Nature of Change</th>
<th>Date</th>
<th>Initiator</th>
</tr>
        
<tr class="tr-even">
<td>update</td>
<td>
Final changes now that the Kite/GitHub transition is complete.
</td>
<td>10/27/2014</td>
<td>will</td>
</tr>
        

<tr class="tr-odd">
<td>update</td>
<td>
Minor tweaks for Mars 3.0.0, as Kite has solidified.
</td>
<td>8/20/2014</td>
<td>will</td>
</tr>
        

<tr class="tr-even">
<td>update</td>
<td><p>
Major updates for Mars 3.0.0:

</p><ul>
<li> Moved from Subversion/Bugzilla to github.
</li><li> Binary packages have been moved to a different project.
</li></ul>
</td>
<td>7/7/2014</td>
<td>will</td>
</tr>
        

<tr class="tr-odd">
<td>Update</td>
<td>

Minor updates for Mars 2.x.
</td>
<td>6/25/2012</td>
<td>will</td>
</tr>
        

<tr class="tr-even">
<td>Update</td>
<td>
<ul>
  <li> Changed the naming convention for experimental branches; they
       are named using the year and month, but not the day of the
       month.
  </li><li> Updated the procedure for official builds: the Makefiles now
       handle the version number differently.
</li></ul>
</td>
<td>10/7/2011</td>
<td>will</td>
</tr>
        

<tr class="tr-odd">
<td>Update</td>
<td>
Added a section on target software platforms.
</td>
<td>10/3/2011</td>
<td>will</td>
</tr>
        

<tr class="tr-even">
<td>Update</td>
<td>
<ul>
  <li> Standardized on "https://oak.jpl.nasa.gov/svn" as the
       repository name.  The name "https://oak/svn" is rejected by
       some clients.
  </li><li> Added a procedure for using <a href="./man1/mars_commit.html">mars_commit(1)</a> to commit
       bug fixes.
  </li><li> Added information about how Subversion is integrated with Bugzilla,
       for future reference.
  </li><li> Miscellaneous corrections, e.g., Minerva is now Athena.
</li></ul>
</td>
<td>9/20/2011</td>
<td>will</td>
</tr>
        

<tr class="tr-odd">
<td>New</td>
<td> Initial draft. </td>
<td>10/15/2008</td>
<td>will</td>
</tr>
        
</table>

<hr class="hrule">


<h2><a name="overview" href="#toc.overview">1. Overview</a></h2>
<p>Mars 3.x is an infrastructure library for simulation development.  Its
primary client is the Athena project.  Mars uses
<a href="http://github.jpl.nasa.gov/athena/mars">GitHub 4 JPL</a> for version control 
and issue tracking, and <a href="https://github.jpl.nasa.gov/athena/kite">kite(1)</a> for build management and other
development tasks. This document explains how this works in practice.


</p>

<h3><a name="overview.numbering" href="#toc.overview.numbering">1.1 Mars Version Numbering</a></h3>
<p>The Mars version number is set in the <a href="https://github.jpl.nasa.gov/athena/kite">kite(1)</a> project file.</p>

<p>Tagged releases of the Mars software are numbered <i>x.y.z</i>, following
standard Tcl <a href="http://www.tcl.tk/man/tcl8.6/TclCmd/package.htm">package(n)</a> version numbering conventions.  
The version number applies to all Mars library packages.  The
head of Mars development is currently version 3.0.23.</p>

<p>If development a new version of Mars is prolonged over two or more days,
the version number in <span class="tt">project.kite</span> can be set to an "unstable" version 
number, e.g., "3.<i>x.y</i>a0".  Otherwise, the version number in
<span class="tt">project.kite</span> will be the current stable version number (if no
changes have been made since the last tagged release) or the version 
number of the forthcoming tagged release.


</p>

<h3><a name="overview.tagged_releases" href="#toc.overview.tagged_releases">1.2 Tagged Releases</a></h3>
<p>Whenever significant changes have been made to Mars, the Mars build manager
may elect to perform an <a href="#proc.cmbuild">official build</a>, resulting
in a new tagged release.  Client projects should always perform their own
official builds against a tagged release, not against the HEAD.</p>

<p>With each tagged release, the Mars version number is updated in 
accordance with the principles of 
<a href="http://semver.org">semantic versioning</a>.


</p>

<h3><a name="overview.tree" href="#toc.overview.tree">1.3 Project Tree</a></h3>
<p>The project directory tree is as follows:

</p>

<center><table class="table">
<caption><b><a name="tab.tree" href="#toc.tab.tree">Table 1-1: Project Directory Tree</a><b></b></b></caption>
    
<tr><td>Path</td> <td>Description</td></tr>

<tr class="tr-even"><td><b><tt><i>root</i>/</tt></b></td>
<td>
     Root of project tree</td>
</tr>
    
<tr class="tr-odd"><td><b><tt>&nbsp;&nbsp;&nbsp;&nbsp;project.kite</tt></b></td>
<td>
     <a href="https://github.jpl.nasa.gov/athena/kite">kite(1)</a> Project File </td>
</tr>
    
<tr class="tr-even"><td><b><tt>&nbsp;&nbsp;&nbsp;&nbsp;bin/</tt></b></td>
<td>
     Executable loader scripts and ancillary 
                         tools.</td>
</tr>
    
<tr class="tr-odd"><td><b><tt>&nbsp;&nbsp;&nbsp;&nbsp;docs/</tt></b></td>
<td>
     Project documentation</td>
</tr>
    
<tr class="tr-even"><td><b><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;man1/</tt></b></td>
<td>
     Man page section (1): Executables</td>
</tr>
    
<tr class="tr-odd"><td><b><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;man5/</tt></b></td>
<td>
     Man page section (5): File Formats</td>
</tr>
    
<tr class="tr-even"><td><b><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mann/</tt></b></td>
<td>
     Man page section (n): Tcl Commands</td>
</tr>
    
<tr class="tr-odd"><td><b><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mani/</tt></b></td>
<td>
     Man page section (i): Tcl Interfaces</td>
</tr>
    
<tr class="tr-even"><td><b><tt>&nbsp;&nbsp;&nbsp;&nbsp;lib/</tt></b></td>
<td>
     Tcl Libraries </td>
</tr>
    
<tr class="tr-odd"><td><b><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>name</i>/</tt></b></td>
<td>
     Tcl source code for package
                           <i>name</i></td>
</tr>
    
<tr class="tr-even"><td><b><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;app_<i>name</i>/</tt></b></td>
<td>
     Tcl source code for mars(1) application
                           mars_<i>name</i></td>
</tr>
    
<tr class="tr-odd"><td><b><tt>&nbsp;&nbsp;&nbsp;&nbsp;test/</tt></b></td>
<td>
     Project test suites</td>
</tr>
    
<tr class="tr-even"><td><b><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>name</i>/</tt></b></td>
<td>
     Test suite for package <i>name</i></td>
</tr>
    
<tr class="tr-odd"><td><b><tt>&nbsp;&nbsp;&nbsp;&nbsp;src/</tt></b></td>
<td>
     Compiled source directories</td>
</tr>
    
<tr class="tr-even"><td><b><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>name</i>/</tt></b></td>
<td>
     Compiled source directory <i>name</i></td>
</tr>
    
</table></center>
    

<p><b>Notes:</b>

</p>

<ul>
  <li> All Mars executables are development tools; none are delivered
       with client projects.
  </li><li> Mars manual pages are written in <a href="./man5/manpage.html">manpage(5)</a> format.
  </li><li> By convention, Tcl man pages are placed in section (n) of the
       Unix manual.
  </li><li> The structure of Tcl package directories is described in the
       <a href="./../../kite/docs/kdg.html">Kite Developer's Guide</a>.
</li></ul>


<h3><a name="overview.docs" href="#toc.overview.docs">1.4 Development Documentation</a></h3>
<p>Mars development documentation consists of:

</p>

<ul>
  <li> Software manual pages (man pages)
  </li><li> Memos
  </li><li> Other documents: this CM Plan, etc.
</li></ul>
<p>Software manual pages are stored in the repository project tree, as
described in <a href="#overview.tree">Section 1.3</a>, and are written in <a href="./man5/manpage.html">manpage(5)</a>
format.</p>

<p>Other documents will be written in HTML or in MS Office formats; however,
MS Office documents must not be saved in the code repository.  
They will be archived on the <a href="https://pepper.jpl.nasa.gov/kite">Boxkite Server</a> and pulled
be pulled temporarily into the <span class="tt">docs</span> directory for inclusion in the
distribution .zip file.</p>

<p>HTML documents, like this CM plan, will usually use the 
<a href="./man5/kitedoc.html">kitedoc(5)</a> extended HTML format, and will be stored in the
repository in the <code>docs</code> directory.


</p>

<h3><a name="overview.references" href="#toc.overview.references">1.5 References</a></h3>
    

<ul>
<li> <a href="http://git-scm.com">Git</a>
</li><li> <a href="http://github.jpl.nasa.gov/athena/mars">GitHub 4 JPL</a>
</li><li> <a href="https://github.jpl.nasa.gov/athena/kite">kite(1)</a>
</li><li> <a href="./coding.html">Mars Tcl Coding Standard</a>
</li><li> <a href="https://pepper.jpl.nasa.gov/kite">Boxkite Server</a>
</li><li> <a href="http://www.tcl.tk/man/tcl8.6/TclCmd/package.htm">package(n)</a>
</li></ul>


<h2><a name="platform" href="#toc.platform">2. Target Platforms</a></h2>
<p>Mars is primarily a pure-TCL cross-platform library, and targets Linux and 
Windows.  It also runs adequately on OS X, with some GUI oddities.</p>

<p>In addition, its Marsbin packages contains compiled optimizations for some
of the <a href="./mann/marsutil.html">marsutil(n)</a> commands as well as code for geographic coordinate
conversions that the pure-Tcl packages do not support.  These binary commands
are used if available.


</p>

<h2><a name="vc" href="#toc.vc">3. Version Control</a></h2>
<p>Mars uses the <a href="http://git-scm.com">Git</a> version control system, hosted at 
<a href="http://github.jpl.nasa.gov/athena/mars">GitHub 4 JPL</a>.


</p>

<h3><a name="vc.repository" href="#toc.vc.repository">3.1 The Git Repository</a></h3>
<p>The Mars repository URL is
<span class="tt"><a href="https://github.jpl.nasa.gov/athena/mars">https://github.jpl.nasa.gov/athena/mars</a></span>.



</p>

<h3><a name="vc.branches" href="#toc.vc.branches">3.2 Git Branches and Tags</a></h3>
<p>This section explains how Mars uses Git branches and tags to
facilitate development of Mars and its clients.  Procedures appear in
<a href="#proc">Section 6</a>.


</p>

<h4><a name="vc.branches.master" href="#toc.vc.branches.master">3.2.1 Main-Line Development</a></h4>
<p>Main-line development takes place on the <b>master</b> branch.


</p>

<h4><a name="vc.branches.builds" href="#toc.vc.branches.builds">3.2.2 Build Tags</a></h4>
<p>At each official build during normal development, we tag the <b>master</b>
branch as "<code>v3.<i>x.y</i></code>" This serves as a snapshot of the
build, and allows it to be recovered at any time.  This is done 
through <a href="http://github.jpl.nasa.gov/athena/mars">GitHub 4 JPL</a>'s "releases" interface.


</p>

<h4><a name="vc.branches.exper" href="#toc.vc.branches.exper">3.2.3 Experimental Branches</a></h4>
<p>Developers can create branches on which to do experimental coding; the
results can later be merged with the trunk or deleted.  Experimental
branches should be given a descriptive name.  Branches should be deleted
when no longer needed.  Branches may be synced with the
<a href="http://github.jpl.nasa.gov/athena/mars">GitHub 4 JPL</a> server or retained solely on the user's machine, at the 
user's discretion.  Obsolete branches should be removed.


</p>

<h4><a name="vc.branches.bugfix" href="#toc.vc.branches.bugfix">3.2.4 Bug-fix Branches</a></h4>
<p>When fixing complicated bugs over a period of time, it is sometimes
useful to do the fix on a separate branch.  This allows multiple
commits without any chance of destabilizing the trunk.  Such branches
should be called "<code>issue<i>n</i></code>", where
<code>n</code> is the issue number in the tracker at
<a href="http://github.jpl.nasa.gov/athena/mars">GitHub 4 JPL</a>.  The completed fix can be merged
back to the trunk just as with an experimental branch.


</p>

<h4><a name="vc.branches.release" href="#toc.vc.branches.release">3.2.5 Release Branches</a></h4>
<p>We have not usually needed release branches for Mars, and so do not
create them by default.  A release branch is created under the following
circumstances:

</p>

<ul>
<li> A change is made to a released piece of software
</li><li> That builds against an older version of Mars
</li><li> Where the change requires changes to Mars
</li><li> And we can't reasonably build against the latest version of Mars.
</li></ul>
<p>In this case we will create a release branch based on the release's
tag.  If the tag is, say, v3.0.10, then the tags on the release
branch will be "v.3.0.10.1", "v3.0.10.2", and so forth.


</p>

<h3><a name="vc.commits" href="#toc.vc.commits">3.3 Committing Changes</a></h3>
<p>The <a href="http://github.jpl.nasa.gov/athena/mars">GitHub 4 JPL</a> desktop software makes it very easy to include
detailed commit messages with each commit: both a brief one-line
title and a more detailed description.  Developers should strive to
provide informative commit messages.


</p>

<h4><a name="vc.commits.issues" href="#toc.vc.commits.issues">3.3.1 Committing Changes for an Issue</a></h4>
<p>To relate a commit to a particular issue in the issue tracker, 
use any of the following forms (which are case-insensitive) somewhere
in the commit message to close the issue automatically, 
where <i>nnn</i> is the issue number.

</p>

<ul>
<li> <code>fix #<i>nnn</i></code>
</li><li> <code>fixes #<i>nnn</i></code>
</li><li> <code>fixed #<i>nnn</i></code>
</li><li> <code>close #<i>nnn</i></code>
</li><li> <code>closes #<i>nnn</i></code>
</li><li> <code>closed #<i>nnn</i></code>
</li><li> <code>resolve #<i>nnn</i></code>
</li><li> <code>resolves #<i>nnn</i></code>
</li><li> <code>resolved #<i>nnn</i></code>
</li></ul>
<p>When making changes that do not fully resolve the issue, simply
reference the issue number as "#<i>nnn</i>".


</p>

<h2><a name="issue" href="#toc.issue">4. Issue Tracking</a></h2>
<p>Both bugs and new requirements will be tracked using the <a href="http://github.jpl.nasa.gov/athena/mars">GitHub 4 JPL</a>
issue tracker.


</p>

<h3><a name="issue.milestones" href="#toc.issue.milestones">4.1 Versions and Milestones</a></h3>
    

<p><a href="http://github.jpl.nasa.gov/athena/mars">GitHub 4 JPL</a>'s issue tracker relates issues to "milestones"; open
issues can be associated with the future milestones for which they are
scheduled to be closed.</p>

<p>We will create a milestone for each official version of Mars 
(see <a href="#overview.numbering">Section 1.1</a>).  As issues are closed, the developer
will associate them with the milestone for the next build.</p>

<p>Milestones are initially open; a milestone can be closed any time after
it is built and tagged.


</p>

<h3><a name="issue.reporting" href="#toc.issue.reporting">4.2 Issue Contents</a></h3>
<p>Each issue should include:

</p>

<ul>
<li> The platform
</li><li> The version of Mars in which the bug occurred
</li><li> Enough information to recreate the problem, if possible.
</li></ul>


<h3><a name="issue.lifecycle" href="#toc.issue.lifecycle">4.3 Life Cycle</a></h3>
<p>An issue is opened when a problem, bug, defect, or enhancement is noted,
and assigned to the relevant developer.  It should be labeled as a "Bug",
"Enhancement", etc.</p>

<p>An issue is assigned to the next milestone (version) when the work is 
complete.</p>

<p>If Mars went through the I&T process as an application, the issues for
a given  milestone would be closed by the tester.  As an infrastructure
library, Mars does not go through I&T on its own, but only as part
of a client application.  Thus, the developer is responsible for 
opening and closing Mars issues.</p>

<p>Each issue is closed by the developer when the work on it is complete
and it is assigned to a milestone.  The milestone may be closed when
the changes in it have been tested "in-use" in a client application.


</p>

<h2><a name="clients" href="#toc.clients">5. Client Projects</a></h2>
<p>Mars is not delivered on its own, but is to be used as an
infrastructure layer by client projects.  This section explains how
client projects are intended to fit Mars into their CM, using Athena as
an example.


</p>

<h3><a name="clients.issues" href="#toc.clients.issues">5.1 Bug Reporting</a></h3>
<p>When a change is made that affects both Mars and a client, two issues
are needed: one on the Mars issue tracker and one on the client's issue
tracker.  The Mars issue provides a record of what's changed in
Mars, and the client issue goes through I&amp;T with the client.


</p>

<h3><a name="clients.cmbuilds" href="#toc.clients.cmbuilds">5.2 Client Official Builds</a></h3>
<p>When an official build is to be done for the client, the client should
build with a stable version of Mars.  This is done by installing the
stable version of Mars on the client's machine from the 
<a href="https://pepper.jpl.nasa.gov/kite">Boxkite Server</a>, or by cloning the Mars repository and building the stable
version locally. The client the builds with the proper version of Mars by updating the version numbers for the Mars packages 
in its <span class="tt">project.kite</span> file.


</p>

<h2><a name="proc" href="#toc.proc">6. Procedures</a></h2>
<p>This section describes procedures for Mars development.  Procedures 
common to all Git projects are ignored; the emphasis is on policy.


</p>

<h3><a name="proc.clone" href="#toc.proc.clone">6.1 Cloning the Repository</a></h3>
<p>By convention, <a href="http://github.jpl.nasa.gov/athena/mars">GitHub 4 JPL</a> repositories are cloned to the
<code>~/github/<i>project</i></code> directory; hence, Mars is cloned
to <span class="tt">~/github/mars</span>.


</p>

<h3><a name="proc.devbuild" href="#toc.proc.devbuild">6.2 Performing a Development Build</a></h3>
<p>A development build is simply a build performed during the course of
development.   For Mars, it builds all binary extensions and Marsbin, 
runs all unit tests, builds the documentation, packages up the libraries
for teapot installation, produces <code>mars.kit</code>, and packages up 
distribution for archival on the <a href="https://pepper.jpl.nasa.gov/kite">Boxkite Server</a>.

</p>

<table class="procedure">
        

<tr>
<td class="procedure-index">1.</td>
<td>
        
Go to the work area.
</td><td>
<pre>$ cd ~/github/mars</pre>
</td></tr>

<tr>
<td class="procedure-index">2.</td>
<td>
        
Build the project.
</td><td>
<pre>$ kite build all</pre>
</td></tr>
</table>
<p>Alternatively, <a href="https://github.jpl.nasa.gov/athena/kite">kite(1)</a>'s other subcommands can be used to do 
particular parts of the build, e.g., just running tests or formatting
documents.


</p>

<h3><a name="proc.cmbuild" href="#toc.proc.cmbuild">6.3 Performing Official Builds</a></h3>
<p>Note that many of the <a href="http://git-scm.com">Git</a>-related steps can also be done
using the <a href="http://github.jpl.nasa.gov/athena/mars">GitHub 4 JPL</a> desktop application or the <a href="http://github.jpl.nasa.gov/athena/mars">GitHub 4 JPL</a>
web interface.

</p>

<table class="procedure">
        

<tr>
<td class="procedure-index">1.</td>
<td>
        
Make sure all developers have committed all changes needed for the build.
</td><td>
n/a
</td></tr>

<tr>
<td class="procedure-index">2.</td>
<td>
        
Sync the <b>master</b> branch out of the repository
into <code>~/github/mars</code>.
</td><td>
n/a.
</td></tr>

<tr>
<td class="procedure-index">3.</td>
<td>
        
Determine the version number.  This will almost always be the version
in the <code>project.kite</code> file.  If necessary, bump the version
number, applying <a href="http://semver.org">semantic versioning</a>.
</td><td>
E.g., for a simple bug fix step from "3.3.0" to "3.3.1".
</td></tr>

<tr>
<td class="procedure-index">4.</td>
<td>
        
Update the version in <code>project.kite</code>.
</td><td>
<pre>
$ cd ~/github/mars
$ vim project.kite 
</pre>
</td></tr>

<tr>
<td class="procedure-index">5.</td>
<td>
        
Update the Build Notes file, <code>docs/build_notes.ehtml</code>, with
the details about the current build.  The update will
usually include the version, the date, a general description of the
changes, and a list of issue included in the build, with titles.
</td><td>
<pre>
$ cd ~/github/mars/docs
$ vim build_notes.ehtml
</pre>
</td></tr>


<tr>
<td class="procedure-index">6.</td>
<td>
        
Build and test the software, resolving any problems found until the
build is clean.
</td><td>
<pre>
$ cd ~/github/mars
# kite build all
</pre>
</td></tr>

<tr>
<td class="procedure-index">7.</td>
<td>
        
Commit the changes, using the GitHub desktop application or the 
'git' command line tool.
</td><td>
<pre>
$ cd ~/github/mars
$ git commit -a "Building Mars 3.3.0"
</pre>
</td></tr>

<tr>
<td class="procedure-index">8.</td>
<td>
        
Tag the <b>master</b> branch with the build number.
This is most easily done using the GitHub web page.
</td><td><p>
On the GitHub mars web page, click on "releases" and make a 
new release.  Tag it as "v3.3.0", title it "Mars v3.3.0", and enter
a brief description.</p>

<p>Or,

</p><pre>
$ cd ~/github/mars
$ git tag -a -m "Mars v3.3.0" v3.3.0
</pre>
</td></tr>

<tr>
<td class="procedure-index">9.</td>
<td>
        
If desired, the teapot packages for Mars library packages can be
installed in the local teapot, and the Mars executable can be installed
in ~/bin.
</td><td>
<pre>
$ kite install
</pre>
</td></tr>

<tr>
<td class="procedure-index">10.</td>
<td>
        
If desired, the installation distribution set can be archived to the
<a href="https://pepper.jpl.nasa.gov/kite">Boxkite Server</a>.
</td><td>
<pre>
$ cd ~/github/mars
$ boxkite put
<pre>
</pre></pre></td></tr>

<tr>
<td class="procedure-index">11.</td>
<td>
        
Increment the version number in <code>project.kite</code> 
to the next version, e.g., from "3.3.0" to "3.3.1".
</td><td>
<pre>
$ cd ~/github/mars
$ vim project.kite
$ kite info
$ git commit -a "Incremented version."
</pre>
</td></tr>

<tr>
<td class="procedure-index">12.</td>
<td>
        
Add the new version as a milestone in <a href="http://github.jpl.nasa.gov/athena/mars">GitHub 4 JPL</a>.
</td><td>
At the <a href="http://github.jpl.nasa.gov/athena/mars">GitHub 4 JPL</a> web site, add milestone "v3.3.1".  See
the <a href="http://github.jpl.nasa.gov/athena/mars">GitHub 4 JPL</a> help for instructions.
</td></tr>

</table>



<h3><a name="proc.commit" href="#toc.proc.commit">6.4 Committing Bug Fixes</a></h3>
<p>Using the <a href="http://github.jpl.nasa.gov/athena/mars">GitHub 4 JPL</a> desktop software or the <a href="http://git-scm.com">Git</a> 
command line tools, commit the changes, referencing the issue
number as "#<i>nnn</i>".  If you use one of the phrases from 
"<a href="#vc.commits.issues">Section 3.3.1</a>", the issue will be closed automatically.</p>

<p>When the issue is complete resolved, close the issue and assign it to
the milestone for the next build, creating the milestone if necessary.


</p>

<hr>
<p><address><a href="mailto:William.H.Duquette@jpl.nasa.gov">William.H.Duquette@jpl.nasa.gov</a></address>
</p>

</body>
</html>
    

<!-- List of Anchors
changelog                 Change Log
overview                  1. Overview
overview.numbering        1.1 Mars Version Numbering
overview.tagged_releases  1.2 Tagged Releases
overview.tree             1.3 Project Tree
    tab.tree              Table 1-1: Project Directory Tree
overview.docs             1.4 Development Documentation
overview.references       1.5 References
platform                  2. Target Platforms
vc                        3. Version Control
vc.repository             3.1 The Git Repository
vc.branches               3.2 Git Branches and Tags
vc.branches.master        3.2.1 Main-Line Development
vc.branches.builds        3.2.2 Build Tags
vc.branches.exper         3.2.3 Experimental Branches
vc.branches.bugfix        3.2.4 Bug-fix Branches
vc.branches.release       3.2.5 Release Branches
vc.commits                3.3 Committing Changes
vc.commits.issues         3.3.1 Committing Changes for an Issue
issue                     4. Issue Tracking
issue.milestones          4.1 Versions and Milestones
issue.reporting           4.2 Issue Contents
issue.lifecycle           4.3 Life Cycle
clients                   5. Client Projects
clients.issues            5.1 Bug Reporting
clients.cmbuilds          5.2 Client Official Builds
proc                      6. Procedures
proc.clone                6.1 Cloning the Repository
proc.devbuild             6.2 Performing a Development Build
proc.cmbuild              6.3 Performing Official Builds
proc.commit               6.4 Committing Bug Fixes

-->
